original_index,duplicate_index,similarity,scenario_A,scenario_B
367,368,0.98841363,"Given A 'ContentItem' has been created and is marked as not requiring approval When The 'ContentItem' is scheduled for publication to LinkedIn, and the system processes the scheduled publication Then A 'PublishJob' should be enqueued, a background worker should process the job by calling the LinkedIn API, the 'PublishJob.publishedAt' timestamp should be recorded, and the 'ContentItem' status should be updated to 'published'","Given A 'ContentItem' has been created, marked as requiring approval, and has been successfully approved by an authorized user When The approved 'ContentItem' is scheduled for publication to LinkedIn, and the system processes the scheduled publication Then A 'PublishJob' should be enqueued, a background worker should process the job by calling the LinkedIn API, the 'PublishJob.publishedAt' timestamp should be recorded, and the 'ContentItem' status should be updated to 'published'"
706,708,0.9808047,Given A user's current scope has storage usage below 80% of its quota. When The global chrome quota meter is displayed. Then The quota meter is color-coded green.,Given A user's current scope has storage usage above 95% of its quota. When The global chrome quota meter is displayed. Then The quota meter is color-coded red.
706,707,0.98076737,Given A user's current scope has storage usage below 80% of its quota. When The global chrome quota meter is displayed. Then The quota meter is color-coded green.,Given A user's current scope has storage usage between 80% and 95% of its quota. When The global chrome quota meter is displayed. Then The quota meter is color-coded yellow.
847,848,0.97847235,"Given An authenticated user wants to subscribe to a plan and their billing account has an existing Stripe customer ID When They make a POST request to '/api/billing/create-checkout-session' with plan details (planId, interval, seats) Then A new Stripe Checkout session is created using the existing customer ID, 'mode' is 'subscription', 'payment_method_types' is 'card', 'line_items' reflect the plan details, success and cancel URLs are set, metadata includes teamId, userId, and planId, and the API responds with the Stripe checkout session URL.","Given An authenticated user wants to subscribe to a plan and their billing account does not have an existing Stripe customer ID When They make a POST request to '/api/billing/create-checkout-session' with plan details (planId, interval, seats) Then A new Stripe customer is created using the user's email, a new Stripe Checkout session is created using the newly generated customer ID, 'mode' is 'subscription', 'payment_method_types' is 'card', 'line_items' reflect the plan details, success and cancel URLs are set, metadata includes teamId, userId, and planId, and the API responds with the Stripe checkout session URL."
822,840,0.9597914,Given A user completes a new subscription via Stripe Checkout When The 'checkout.session.completed' webhook is processed Then A new subscription is successfully created and reflected in the database,Given A user successfully completes a new subscription via Stripe Checkout When The 'checkout.session.completed' webhook is processed Then 'BillingAccount' and 'Subscription' entries are created in the database
709,710,0.9576505,Given A user has permission to upgrade storage. When The quota meter is displayed. Then An 'Upgrade' CTA button is visible.,Given A user does not have permission to upgrade storage directly. When The quota meter is displayed. Then A 'Request more storage' CTA button is visible.
174,175,0.9469837,"Given a publish job is in 'QUEUED' status When a worker successfully processes the publish job Then the publish job's 'status' should be updated to 'PUBLISHED', 'publishedAt' should be set, and a 'JobAttempt' record should be created with no 'errorText'","Given a publish job is in 'QUEUED' status When a worker attempts to process the publish job but encounters an error Then the publish job's 'status' should be updated to 'FAILED', 'lastError' should be populated, and a 'JobAttempt' record should be created with the 'errorText'"
824,825,0.9452272,"Given A user downgrades their subscription with a scheduled effective date When The downgrade request is processed Then The subscription change is scheduled, and the database reflects the future change","Given A user downgrades their subscription with an immediate effective date When The downgrade request is processed Then The subscription changes immediately, and the database reflects the current change"
846,859,0.94502985,"Given A user's payment fails When The payment failure is detected Then The subscription status is set to 'past_due', and notifications are triggered","Given A user's subscription payment fails When The system detects the payment failure Then The subscription status is set to 'past_due', the user is notified, and the admin is notified"
100,997,0.9429319,Given An admin wants to monitor AI credit usage. When They view the usage tracking dashboards. Then The dashboards display AI credit consumption per user and per team.,Given a user or admin wants to monitor AI usage When they access the usage tracking dashboard Then they should see detailed AI credit usage per user and per team.
694,695,0.9412436,"Given A user or team has a subscription that is downgraded, decreasing their 'storageQuotaBytes' below their current 'storageUsedBytes', and overage billing is not allowed. A grace period is in effect. When A Stripe webhook notifies the system of the subscription change, and the grace period expires. Then Admins are notified, and new uploads for that user/team are disabled until usage is resolved.","Given A user or team has a subscription that is downgraded, decreasing their 'storageQuotaBytes' below their current 'storageUsedBytes', and overage billing is allowed. When A Stripe webhook notifies the system of the subscription change. Then Admins are notified, and the system automatically charges for the overage based on policy."
501,502,0.9399568,"Given An incoming request contains a valid ""Stripe-Signature"" header. When The system attempts to validate the ""Stripe-Signature"" header. Then The signature is successfully validated and the request is processed.","Given An incoming request contains an invalid ""Stripe-Signature"" header. When The system attempts to validate the ""Stripe-Signature"" header. Then The signature validation fails and the request is rejected."
262,263,0.9386163,"Given A user record exists with associated team memberships, seats, and workspace access entries. When The user record is deleted. Then All related 'team_members', 'seats', and 'user_workspaces' records for that user are automatically deleted due to cascading delete constraints.","Given A team record exists with associated team members, seats, and workspaces. When The team record is deleted. Then All related 'team_members', 'seats', and 'workspaces' records for that team are automatically deleted due to cascading delete constraints. (This also implicitly deletes associated 'user_workspaces' records for deleted workspaces)."
699,701,0.93765485,"Given A user initiates an image upload within a workspace. When The system attempts to reserve storage for the image. Then An 'uploading' image record is created, and the workspace's 'storageUsedBytes' counter is incremented.","Given A user initiates an image upload, and neither a workspace nor a team has a specific storage quota. When The system attempts to reserve storage for the image. Then An 'uploading' image record is created, and the user's 'storageUsedBytes' counter is incremented."
693,747,0.9351487,"Given A user or team has a subscription that is upgraded, increasing their 'storageQuotaBytes'. When A Stripe webhook notifies the system of the subscription change. Then User.storageQuotaBytes or Team.storageQuotaBytes is updated to the new, higher value.",Given A user or team has changed their subscription plan or purchased additional storage. When A Stripe webhook notification is received for a billing event. Then The system updates User.storageQuotaBytes or Team.storageQuotaBytes accordingly.
678,680,0.93238986,"Given A user has a personal quota of X bytes and has Y bytes used, where Y < X. When The user attempts to upload a file of size S bytes to 'My Space' where S > (X - Y). Then The upload is blocked with a 422 response, and a 'Quota exceeded, upgrade' CTA is shown.","Given A workspace has a specific quota of X bytes and has Y bytes used, where Y < X. When A user attempts to upload a file of size S bytes to this workspace where S > (X - Y). Then The upload is blocked with a 422 response, and a 'Quota exceeded, upgrade' CTA is shown."
66,964,0.9300679,Given A user is in the content creation interface. When They provide a prompt to the AI assistant. Then The AI assistant generates multiple content variations based on the prompt.,Given a user provides a prompt to the AI assistant When the AI processes the prompt Then it should generate multiple content variations for the user to choose from.
82,980,0.92960846,Given A user wants to understand their market position. When They access the competitor & gap analysis feature. Then The system provides insights into competitor performance and identifies content gaps.,Given a user wants to analyze their market position When they request a competitor and gap analysis Then the system should provide insights into their competitors' performance and content gaps.
270,271,0.9292431,"Given A content item has an active approval process in 'PENDING' status, and the current user is an assigned approver for the active step. When The approver approves the current step of the content item, optionally adding a comment. Then An 'approval_transitions' record is created logging the approval, and the 'approvals.status' is updated to reflect the next step or 'APPROVED' if it's the final step.","Given A content item has an active approval process in 'PENDING' status, and the current user is an assigned approver for the active step. When The approver rejects the current step of the content item, providing a mandatory comment. Then An 'approval_transitions' record is created logging the rejection, the 'approvals.status' is updated to 'REJECTED', and the rejection comment is recorded."
881,882,0.92880535,"Given An approval request for content with `status=PENDING`. When An approver calls `approval.act` with `approvalId`, `action='REJECTED'`, and a `message`. Then The Approval record's status is updated to `REJECTED`.","Given An approval request for content with `status=PENDING`. When An approver calls `approval.act` with `approvalId`, `action='REQUEST_CHANGES'`, and a `message`. Then The Approval record's status is updated to `REQUEST_CHANGES`."
83,981,0.9262044,Given A user is creating new content. When They request a predicted performance analysis for the content. Then The AI provides a forecast of how the content is likely to perform before it is published.,Given a user creates a new piece of content When they request a performance forecast Then the AI should predict the content's potential reach and engagement before it's published.
0,961,0.9252879,Given A new user accesses the Scribl platform for the first time. When The user attempts to sign up or log in. Then The user should be prompted to authenticate via LinkedIn OAuth.,Given a new user When they choose to sign up using LinkedIn OAuth Then they should be authenticated and logged into Scribl using their LinkedIn credentials.
331,332,0.92378676,"Given The public.update_search_tsv() function exists, is defined as SECURITY DEFINER, and a 'content_items' table. When A new 'content_items' row is inserted or an existing one is updated. Then The 'search_tsv' column should be populated by combining 'title' (weight 'A'), 'body' (weight 'B'), and 'tags' (weight 'C') into a 'simple' tsvector, and the function should execute with a cleared 'search_path' for security.","Given The public.update_search_tsv() function exists, is defined as SECURITY DEFINER, and a 'templates' table. When A new 'templates' row is inserted or an existing one is updated. Then The 'search_tsv' column should be populated by combining 'title' (weight 'A') and 'schema_json' (weight 'B') into a 'simple' tsvector, and the function should execute with a cleared 'search_path' for security."
501,503,0.9216479,"Given An incoming request contains a valid ""Stripe-Signature"" header. When The system attempts to validate the ""Stripe-Signature"" header. Then The signature is successfully validated and the request is processed.","Given An incoming request does not contain a ""Stripe-Signature"" header. When The system attempts to validate the ""Stripe-Signature"" header. Then The signature validation fails due to the missing header and the request is rejected."
469,512,0.92110837,"Given The application is in a production environment When A POST request is made to '/auth/demo-login' Then The system should return a 403 Forbidden response indicating ""Disabled in production""",Given The application is running in a production environment When A user sends a POST request to `/auth/demo-login` Then The system returns a `403 Forbidden` error
107,1004,0.91880554,"Given A user accesses Scribl on a mobile device. When They perform actions like creating, approving, or publishing content. Then The responsive PWA provides an optimized interface and allows quick execution of these tasks.","Given a user accesses Scribl on a mobile device When they use the responsive PWA Then they should experience a streamlined interface for quick content creation, approval, and publishing."
98,995,0.9157605,Given A user is on a specific subscription tier. When They generate AI content. Then Their AI credit balance is debited from the allocation corresponding to their tier.,Given a user is on a specific subscription tier When they use AI features Then their AI credit consumption should be deducted from the allocation corresponding to their tier.
120,955,0.9109491,Given an enterprise user with an SSO-configured account When the user attempts to log in via their enterprise identity provider Then the user should be successfully authenticated and granted access to the application.,Given an enterprise user with SSO enabled When they attempt to log in Then they should be authenticated via their enterprise identity provider.
101,998,0.91033065,Given A user's AI credits are running low. When Their credit balance falls below a threshold. Then The system sends an alert and offers options to purchase extra credit packs or enable auto top-ups.,Given a user's AI credit balance is low When their usage approaches the limit Then they should receive alerts and be presented with options to purchase extra credit packs or enable auto top-ups.
99,996,0.91032004,"Given A user creates AI-generated content of various types. When They generate a post, article, or carousel. Then The AI credits are calculated and consumed differently based on the content type.","Given a user creates different types of content using AI When AI credits are consumed Then the credit calculation should vary based on the content type (e.g., post, article, carousel)."
335,336,0.90703845,"Given A content_item exists, created by a specific user When That user is deleted Then The 'created_by' field of the content_item should be set to NULL","Given A content_item exists, last updated by a specific user When That user is deleted Then The 'updated_by' field of the content_item should be set to NULL"
103,1000,0.90644574,"Given A significant event occurs (e.g., content approved, publishing failed). When The event triggers a notification. Then The user receives an alert via in-app, email, or integrated third-party platforms like Slack/Teams.","Given a significant event occurs (e.g., content approval, publishing failure) When the event triggers a notification Then the user should receive an alert via in-app, email, or integrated channels like Slack/Teams."
386,387,0.9062364,Given A user is interacting with the chat canvas in a workspace When A request is made to save the current session state as a snapshot for a workspace Then The system saves the chat canvas session state,Given Snapshots of chat canvas session states exist for a workspace When A request is made to retrieve snapshots for a workspace Then The system returns the saved chat canvas session states
338,339,0.9056789,"Given An approval record exists, created by a specific user When That user is deleted Then The 'created_by' field of the approval record should be set to NULL","Given An approval record exists, last updated by a specific user When That user is deleted Then The 'updated_by' field of the approval record should be set to NULL"
775,840,0.9045706,Given The system receives a 'checkout.session.completed' webhook from Stripe When The webhook is processed Then The system creates or updates the Subscription and BillingAccount based on the session details,Given A user successfully completes a new subscription via Stripe Checkout When The 'checkout.session.completed' webhook is processed Then 'BillingAccount' and 'Subscription' entries are created in the database
109,1006,0.90444404,"Given A user requires assistance. When They access the help center, follow an onboarding tour, or submit a support ticket. Then They receive guided assistance, documentation, or direct support from the helpdesk.","Given a user needs assistance When they access the help resources Then they should find a help center, onboarding tours, and options to submit support tickets."
666,667,0.90253115,Given A user is on an 'Individual' (free or normal) plan. When The user's storage quota is determined. Then The user is allocated a personal storage quota of 5 GB.,Given A user is on a 'Pro' plan. When The user's storage quota is determined. Then The user is allocated a personal storage quota of 50 GB.
693,722,0.90210444,"Given A user or team has a subscription that is upgraded, increasing their 'storageQuotaBytes'. When A Stripe webhook notifies the system of the subscription change. Then User.storageQuotaBytes or Team.storageQuotaBytes is updated to the new, higher value.",Given A user initiates an upgrade through the 'Upgrade' button. When The user completes the payment via the billing checkout. Then A Stripe webhook updates the 'Team.storageQuotaBytes' or 'User.storageQuotaBytes' accordingly.
76,974,0.9019444,Given A post has been published (or failed to publish). When The publishing attempt concludes. Then The user receives a notification confirming the success or failure of the publishing action.,Given a post has been published When the publishing process completes Then the user should receive a notification confirming success or failure.
160,267,0.90174854,"Given An existing ContentItem. When A user uploads a file as an attachment, providing its filename, content type, size, and storage path. Then A new Attachment record should be created, linked to the ContentItem, storing the file's details.","Given An existing content item and a file to be attached. When The user uploads the file and links it to the content item. Then A new 'attachments' record is created storing the file's metadata (filename, content type, size, storage path) and a link to the content item."
237,244,0.9007789,"Given A PostgreSQL database environment When The idempotent script for 'schedule_status' ENUM creation is executed Then The 'schedule_status' ENUM type should exist with values 'PENDING', 'COMPLETED', 'FAILED'","Given A PostgreSQL database environment When The idempotent script for 'publish_job_status' ENUM creation is executed Then The 'publish_job_status' ENUM type should exist with values 'QUEUED', 'RUNNING', 'FAILED', 'SUCCESS', 'CANCELLED', 'DLQ'"
699,700,0.9000725,"Given A user initiates an image upload within a workspace. When The system attempts to reserve storage for the image. Then An 'uploading' image record is created, and the workspace's 'storageUsedBytes' counter is incremented.","Given A user initiates an image upload within a team, and the workspace does not have a specific storage quota. When The system attempts to reserve storage for the image. Then An 'uploading' image record is created, and the team's 'storageUsedBytes' counter is incremented."
